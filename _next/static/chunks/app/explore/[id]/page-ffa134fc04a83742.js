!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="daaa37ed-0aa9-429b-9e4f-542b65828f2f",e._sentryDebugIdIdentifier="sentry-dbid-daaa37ed-0aa9-429b-9e4f-542b65828f2f")}catch(e){}}(),function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="daaa37ed-0aa9-429b-9e4f-542b65828f2f",e._sentryDebugIdIdentifier="sentry-dbid-daaa37ed-0aa9-429b-9e4f-542b65828f2f")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1581],{8577:function(e,t,a){Promise.resolve().then(a.bind(a,24502)),Promise.resolve().then(a.bind(a,37895)),Promise.resolve().then(a.bind(a,77359)),Promise.resolve().then(a.bind(a,11981)),Promise.resolve().then(a.bind(a,1727)),Promise.resolve().then(a.bind(a,72179)),Promise.resolve().then(a.bind(a,3728)),Promise.resolve().then(a.bind(a,74495)),Promise.resolve().then(a.bind(a,1083)),Promise.resolve().then(a.bind(a,77673)),Promise.resolve().then(a.bind(a,53660)),Promise.resolve().then(a.bind(a,28526)),Promise.resolve().then(a.bind(a,56965)),Promise.resolve().then(a.bind(a,12007)),Promise.resolve().then(a.bind(a,4164)),Promise.resolve().then(a.t.bind(a,88882,23)),Promise.resolve().then(a.bind(a,76489)),Promise.resolve().then(a.bind(a,98989)),Promise.resolve().then(a.bind(a,40280)),Promise.resolve().then(a.bind(a,11416)),Promise.resolve().then(a.bind(a,52484)),Promise.resolve().then(a.bind(a,60574)),Promise.resolve().then(a.bind(a,79248))},11416:function(e,t,a){"use strict";a.r(t),a.d(t,{VaultPageV2:function(){return tY},default:function(){return tK}});var s,r,n,i,l,o,d,c,u,m,h,x=a(57437),p=a(2265),f=a(51545),y=a(15634),w=a(65172),v=a(21543),b=a(28467),g=a(2065),j=a(57134),S=a(4604),C=a.n(S),N=a(99485),k=a(41359),_=a(36298),P=a(98099),V=a(62868),D=a(85042),O=a(50814);function T(){return(T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(null,arguments)}var F=function(e){return O.createElement("svg",T({xmlns:"http://www.w3.org/2000/svg",width:18,height:19,fill:"none"},e),l||(l=O.createElement("path",{stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"m6.75 9.449 1.5 1.5 3.375-3.375M15 9.824c0 3.681-4.015 6.359-5.477 7.211-.166.097-.249.145-.366.17a.9.9 0 0 1-.314 0c-.117-.024-.2-.073-.366-.17C7.015 16.183 3 13.505 3 9.824V6.237c0-.6 0-.9.098-1.157a1.5 1.5 0 0 1 .41-.592c.207-.182.488-.287 1.05-.498l4.02-1.508c.157-.058.235-.088.315-.1a.8.8 0 0 1 .214 0c.08.012.158.042.314.1l4.022 1.508c.561.21.842.316 1.049.498a1.5 1.5 0 0 1 .41.592c.098.258.098.558.098 1.157z"})))},E=a(7504),A=a.n(E);let B=e=>{let{auditor:t,trustScoreValue:a,isBordered:s=!0,className:r}=e;return(0,x.jsxs)("div",{className:(0,P.Z)(A().root,!s&&A().notBordered,r),"data-sentry-component":"TrustScoreBannerV2","data-sentry-source-file":"TrustScoreBannerV2.tsx",children:[(0,x.jsxs)("div",{className:A().trustScoreLeft,children:[(0,x.jsx)(D.d3,{value:a,className:(0,P.Z)(A().trustScore,A().trustScoreMobile),"data-sentry-element":"TrustScore","data-sentry-source-file":"TrustScoreBannerV2.tsx"}),(0,x.jsx)(D.d3,{value:a,className:(0,P.Z)(A().trustScore,A().trustScoreDesktop),isBordered:!1,"data-sentry-element":"TrustScore","data-sentry-source-file":"TrustScoreBannerV2.tsx"}),(0,x.jsx)(V.J6,{className:(0,P.Z)(A().tooltip),viewType:V.DP.Tooltip,"data-sentry-element":"HowTrustScoreCountsButton","data-sentry-source-file":"TrustScoreBannerV2.tsx"})]}),(0,x.jsxs)("div",{className:A().trustScoreRight,children:[(0,x.jsx)(D.xv,{className:A().vaultDescription,textView:D.yS.P3,"data-sentry-element":"Text","data-sentry-source-file":"TrustScoreBannerV2.tsx",children:"This vault is rated with a moderate risk score due to its exposure to high-volatility assets. Safety measures include investments and real-time risk management."}),(0,x.jsxs)("div",{className:A().inspectedContainer,children:[(0,x.jsxs)(D.xv,{textView:D.yS.C1,className:A().auditedBy,"data-sentry-element":"Text","data-sentry-source-file":"TrustScoreBannerV2.tsx",children:[(0,x.jsx)(F,{"data-sentry-element":"ShieldIcon","data-sentry-source-file":"TrustScoreBannerV2.tsx"}),"Audited by"]}),(0,x.jsx)(D.xv,{textView:D.yS.P2,className:A().auditor,"data-sentry-element":"Text","data-sentry-source-file":"TrustScoreBannerV2.tsx",children:t.name})]})]})]})};var I=a(89957),L=a(48153),M=a(7780),U=a.n(M);let R=e=>{var t;let{auditor:a,trustScore:s,vaultId:r,isLoading:n=!1}=e,{data:i,isLoading:l}=(0,L.IJE)(r,{query:{queryKey:[I.S.TrustScoreDetails,r]}}),o=null==i?void 0:null===(t=i.data)||void 0===t?void 0:t.data;if(n||l||!o)return(0,x.jsx)(_.X,{className:"h-[84px] w-full dark:bg-background-chips/50 rounded-lg"});let d=o.slice(0,5),c=o.slice(5,9),u=o.slice(10,12);return(0,x.jsx)(v.d,{id:"trust-score-details",className:"bg-background-chips/50 rounded-lg","data-sentry-element":"Accordion","data-sentry-component":"SafetyScoreDetailsV2","data-sentry-source-file":"SafetyScoreDetailsV2.tsx",children:(0,x.jsx)(b.G,{classNames:{base:"px-4 py-2"},title:(0,x.jsxs)("div",{className:U().container,children:["number"==typeof s&&a&&(0,x.jsx)(B,{trustScoreValue:s,className:U().trustScoreBanner,auditor:a}),(0,x.jsx)(V.J6,{className:(0,P.Z)(U().tooltip,U().tooltipMobile),viewType:V.DP.Button,hasIcon:!0})]}),"data-sentry-element":"AccordionItem","data-sentry-source-file":"SafetyScoreDetailsV2.tsx",children:(0,x.jsxs)("div",{className:"bg-background-chips/50 rounded-lg p-4 flex flex-col gap-4",children:[!!d.length&&(0,x.jsxs)("div",{className:U().breakdownSection,children:[(0,x.jsxs)(D.xv,{className:U().breakdownSectionTitle,textView:D.yS.H4,children:["Protocol",(0,x.jsx)("div",{className:U().line})]}),d.map((e,t)=>(0,x.jsx)(D.pO,{className:U().trustDescription,details:e},t))]}),!!c.length&&(0,x.jsxs)("div",{className:U().breakdownSection,children:[(0,x.jsxs)(D.xv,{className:U().breakdownSectionTitle,textView:D.yS.H4,children:["Pool",(0,x.jsx)("div",{className:U().line})]}),c.map((e,t)=>(0,x.jsx)(D.pO,{className:U().trustDescription,details:e},t))]}),!!u.length&&(0,x.jsxs)("div",{className:U().breakdownSection,children:[(0,x.jsxs)(D.xv,{className:U().breakdownSectionTitle,textView:D.yS.H4,children:["Asset",(0,x.jsx)("div",{className:U().line})]}),u.map((e,t)=>(0,x.jsx)(D.pO,{className:U().trustDescription,details:e},t))]})]})},"trust-score")})};function W(){return(W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(null,arguments)}var Z=function(e){return O.createElement("svg",W({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"currentColor"},e),o||(o=O.createElement("path",{d:"M9.754 8.026q.687 0 .966.434.294.42.294 1.134 0 .364-.07.924-.069.56-.168 1.19-.084.63-.168 1.19-.07.546-.07.896 0 .238.084.336a.27.27 0 0 0 .21.098q.183 0 .392-.252.21-.266.406-.938l.63.182a3.3 3.3 0 0 1-.21.658 3.3 3.3 0 0 1-.406.7 2.2 2.2 0 0 1-.588.546q-.35.21-.798.21-.728 0-1.022-.392t-.294-1.106q0-.476.07-1.036.084-.574.182-1.148.099-.588.168-1.12.07-.532.07-.952 0-.224-.07-.336a.23.23 0 0 0-.21-.112q-.168 0-.378.266-.21.252-.406.924l-.63-.182q.043-.28.196-.644t.406-.7q.267-.336.616-.546.351-.225.798-.224m.602-3.36q.406 0 .672.294.267.294.238.742 0 .434-.28.728a.93.93 0 0 1-.7.294.88.88 0 0 1-.686-.294 1.08 1.08 0 0 1-.252-.728 1.1 1.1 0 0 1 .322-.742.94.94 0 0 1 .686-.294"})))},q=a(23343),z=a(19081);let Y=p.createContext(null),$=()=>{let e=p.useContext(Y);if(!e)throw Error("useFundCalculatorContext must be used within a FundDepositProvider");return e},H=e=>{let{children:t,vault:a}=e,s={...a,tokens:a.tokens?a.tokens:[a.token]};return(0,x.jsx)(Y.Provider,{value:{vault:s},"data-sentry-element":"unknown","data-sentry-component":"FundCalculatorContextProvider","data-sentry-source-file":"FundCalculatorContext.tsx",children:t})};var K=a(49230),G=a(59303),X=a(70762),J=a(20924),Q=a(68915);let ee=async e=>{let{vaultContract:t,tokenContract:a,walletAddress:s,amount:r,onStartApprove:n,onStartDeposit:i}=e,l=a.address,o=t.address,d=await t.token0()===l,c=(await t.getCurrentSqrtPrice()).toString(),u=J.O$.from(c),m=u.mul(95).div(100).toString(),h=u.mul(105).div(100).toString();if((await a.allowance(s,o)).lt(r)){null==n||n();let e=await a.approve(o,X.Bz);await e.wait()}let x=await t.estimateGas.deposit({inToken0:d,amount:r,receiver:s,minSqrtPriceX96:m,maxSqrtPriceX96:h}),p=(0,Q.zb)(x,1.35);null==i||i();let f=await t.deposit({inToken0:d,amount:r,receiver:s,minSqrtPriceX96:m,maxSqrtPriceX96:h},{gasLimit:p});return await f.wait(),f},et=async e=>{let{vaultContract:t,tokenContract:a,walletAddress:s,amount:r,onStartApprove:n,onStartDeposit:i}=e,l=t.address;if((await a.allowance(s,l)).lt(r)){null==n||n();let e=await a.approve(l,X.Bz);await e.wait()}null==i||i();let o=await t.estimateGas.deposit(r.toString(),s),d=(0,Q.zb)(o,1.35),c=await t.deposit(r,s,{gasLimit:d});return await c.wait(),c};(s=d||(d={})).Year="year",s.Quarter="quarter",s.Month="month";let ea=[{key:"year",title:"Year"},{key:"quarter",title:"Quarter"},{key:"month",title:"Month"}],es=(0,p.memo)(e=>{let{onChange:t,value:a}=e;return(0,x.jsx)(G.n,{size:"sm",items:ea,classNames:{tab:"px-2.5",tabList:"rounded-full p-0.5 bg-background-chips gap-0.5",cursor:"rounded-full dark:bg-white bg-white",tabContent:"group-data-[selected=true]:text-black font-poppins"},selectedKey:a,onSelectionChange:e=>t(e),children:e=>{let{key:t,title:a}=e;return(0,x.jsx)(K.r,{title:a,value:t},t)}})});var er=a(4123);let en=e=>{let{isDisabled:t,onClick:a,children:s}=e;return(0,x.jsx)("div",{className:"p-1 bg-background-window rounded-2xl w-full","data-sentry-component":"FundSubmitButton","data-sentry-source-file":"FundSubmitButton.tsx",children:(0,x.jsx)(er.R,{className:"w-full",whenConnectedComponent:(0,x.jsx)(D.zx,{className:"w-full",onClick:a,disabled:t,children:s}),"data-sentry-element":"ConnectWallet","data-sentry-source-file":"FundSubmitButton.tsx"})})},ei=e=>{var t,a,s,r,n,i,l,o;return{isCrypto:!0,address:e.address,symbol:null!==(n=e.symbol)&&void 0!==n?n:"Unnamed",decimals:e.decimals,logoUrl:null!==(i=null===(t=e.icons)||void 0===t?void 0:t.small)&&void 0!==i?i:z.Ok.noImage,chain:{id:e.chainId,logoUrl:null!==(l=null===(s=e.chain)||void 0===s?void 0:null===(a=s.icons)||void 0===a?void 0:a.small)&&void 0!==l?l:z.Ok.noImage,name:null!==(o=null===(r=e.chain)||void 0===r?void 0:r.name)&&void 0!==o?o:"Unknown"}}};var el=a(19254);let eo=async(e,t)=>{var a,s,r,n;let i=await e.decimals(),l=e.provider,o=await e.token0(),d=await e.token0Decimals(),c=(0,z.s)(o,l),u=await c.symbol(),m=Number(null!==(r=null===(a=(await (0,L.vCH)({token:u,chain_id:t})).data.data)||void 0===a?void 0:a.price)&&void 0!==r?r:0),h=await e.token1(),x=await e.token1Decimals(),p=(0,z.s)(h,l),f=await p.symbol(),y=Number(null!==(n=null===(s=(await (0,L.vCH)({token:f,chain_id:t})).data.data)||void 0===s?void 0:s.price)&&void 0!==n?n:0),w=el.formatUnits(await e.totalSupply(),i),[v,b]=await e.getPositionAmounts(),g=el.formatUnits(v,d),j=el.formatUnits(b,x);return(Number(g)*m+Number(j)*y)/Number(w)},ed=async(e,t)=>{var a,s;let r=e.provider,n=await e.asset(),i=(0,z.s)(n,r),l=await i.symbol();return Number(null!==(s=null===(a=(await (0,L.vCH)({token:l,chain_id:t})).data.data)||void 0===a?void 0:a.price)&&void 0!==s?s:0)},ec=async e=>{let{vaultContract:t,walletAddress:a,amount:s}=e,r=await t.estimateGas.redeem(s.toString(),a,a),n=(0,Q.zb)(r,1.35),i=await t.redeem(s,a,a,{gasLimit:n});return await i.wait(),i},eu=async e=>{let{vaultContract:t,tokenAddress:a,walletAddress:s,amount:r}=e,n=await t.token0()===a,i=await t.estimateGas.redeem(n,r.toString(),s,s,0),l=(0,Q.zb)(i,1.35),o=await t.redeem(n,r.toString(),s,s,0,{gasLimit:l});return await o.wait(),o},em=async e=>{let{vaultContract:t,walletAddress:a,amount:s}=e,r=await t.estimateGas.redeem(s.toString(),a),n=(0,Q.zb)(r,1.35),i=await t.redeem(s,a,{gasLimit:n});return await i.wait(),i},eh=(0,p.memo)(()=>{let{submitButtonText:e,handleDeposit:t,isSelectedDefaultToken:a,isDisabledSubmit:s}=eJ();return(0,x.jsx)(en,{onClick:t,isDisabled:s,children:null!=e?e:a?"Deposit":"Auto-convert & Deposit"})});var ex=a(17289);let ep=(0,p.memo)(()=>{let{selectedToken:e,price:t,amount:a,balance:s,isLoadingBalance:r,isDisabledInput:n,isSelectedDefaultToken:i,defaultToken:l,setAmount:o,receivedAmount:d,isLoadingCalculate:c,priceDefaultToken:u}=eJ();return(0,x.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,x.jsx)(D.WA,{onClickPercent:e.isCrypto?e=>{s&&o(new ex.O(s).multipliedBy(e).dp(1===e?18:6).toFixed())}:void 0,isDisabledPercent:!s||r,iconProps:{src:e.logoUrl,width:30,height:30,alt:e.symbol,subImage:e.isCrypto?{src:e.chain.logoUrl,width:13,height:13,alt:e.chain.name}:void 0},title:"You pay",rightSegment:"≈ ".concat((0,Q.T4)((0,z.$s)(a,t))),inputProps:{placeholder:"0",value:a,onChange:e=>o(e.target.value),readOnly:n}}),!i&&(0,x.jsxs)(p.Fragment,{children:[(0,x.jsx)("div",{className:"h-px w-full border-b-1 border-dashed border-stroke-tableBorder"}),(0,x.jsx)(D.WA,{isLoading:c,iconProps:{src:l.logoUrl,width:30,height:30,alt:l.symbol,subImage:{src:l.chain.logoUrl,width:13,height:13,alt:l.chain.name}},title:"You deposit",rightSegment:"≈ ".concat((0,Q.T4)((0,z.$s)(d,u))),inputProps:{placeholder:"0",value:d,readOnly:!0}})]})]})});var ef=a(98804);let ey=(0,p.memo)(()=>{let{setSelectedToken:e,selectedToken:t,selectedTokenId:a,isLoadingPrice:s,isLoadingBalance:r,balance:n,price:i,defaultToken:l,isSelectedDefaultToken:o,setAmount:d}=eJ(),{openModal:c}=(0,ef.oD)(),{address:u}=(0,z.Zc)();return(0,x.jsxs)("div",{className:"flex flex-col gap-[7px]",children:[(0,x.jsx)(ef._U,{onClick:()=>{c({selectedTokenId:a,onSelectToken:t=>{d(""),e(t)},withFiat:e1(l)})},onClearClick:o?void 0:()=>{d(""),e(l)},asset:{icon:t.logoUrl,name:t.symbol},chain:t.isCrypto?{name:t.chain.name,icon:t.chain.logoUrl}:{name:t.name}}),u&&t.isCrypto&&(0,x.jsxs)("div",{className:"flex flex-row justify-between px-2.5",children:[(0,x.jsxs)(D.xv,{textView:D.yS.C4,className:"flex flex-row gap-1",children:[(0,x.jsx)("span",{className:"text-white/70",children:"Available"}),(0,x.jsx)(_.X,{isLoaded:!r,className:"rounded-lg dark:bg-background-tableRow",children:" ".concat((0,Q.T4)(n)," ").concat(t.symbol)})]}),(0,x.jsx)(_.X,{isLoaded:!s&&!r,className:"rounded-lg dark:bg-background-tableRow",children:(0,x.jsxs)(D.xv,{textView:D.yS.C4,className:"text-white/60",children:["≈ $",(0,Q.T4)((0,z.$s)(n,i),2)]})})]})]})}),ew=(0,p.memo)(()=>{let{period:e,setPeriod:t}=eJ();return(0,x.jsx)(es,{value:e,onChange:t})});var ev=a(4874);let eb="DEPOSIT_PROCESS_MODAL_ID",eg=()=>{let{isProcessing:e,selectedToken:t,defaultToken:a,isSelectedDefaultToken:s,receivedAmount:r,amountNumber:n,withZapInDeposit:i,step:l}=eJ(),o=p.useMemo(()=>{let e=["Approving transaction...","Sending transaction on ".concat(a.chain.name,"...")];return i&&e.unshift("Processing swap..."),e},[i,a]),d=ev.ZP.useModal(eb);return(p.useEffect(()=>{e?d.show():d.hide()},[e]),e)?(0,x.jsx)(D.Fb,{asset1:(0,x.jsx)(D.uM,{assetName:t.symbol,assetIconUrl:t.logoUrl,amount:n,label:"You deposit",chain:t.isCrypto?{chainName:t.chain.name,chainIconUrl:t.chain.logoUrl}:void 0}),asset2:s?null:(0,x.jsx)(D.uM,{assetName:a.symbol,assetIconUrl:a.logoUrl,amount:r,label:"You receive",chain:{chainName:a.chain.name,chainIconUrl:a.chain.logoUrl}}),step:l,statuses:o,id:eb,"data-sentry-element":"WaitForCompleteModal","data-sentry-component":"FundDepositProcessModal","data-sentry-source-file":"FundDepositProcessModal.tsx"}):null};function ej(){return(ej=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)({}).hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(null,arguments)}var eS=function(e){return O.createElement("svg",ej({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},e),c||(c=O.createElement("g",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5},O.createElement("path",{stroke:"#fff",d:"M1.238 9.813a7 7 0 1 1 4.95 4.95"}),O.createElement("path",{stroke:"#3AFF42",d:"M10.1 10.1V5.9m0 0H5.9m4.2 0-7 7"}))))};let eC={[d.Year]:"yearly",[d.Quarter]:"quarterly",[d.Month]:"monthly"},eN=(0,p.memo)(()=>{let{period:e,periodApy:t,profit:a,profitUsd:s,isLoadingPrice:r,isLoadingCalculate:n,isLoadingDefaultTokenPrice:i}=eJ(),l=r||i||n;return(0,x.jsxs)("div",{className:"p-4 flex flex-col gap-2 bg-background-window rounded-[20px]",children:[(0,x.jsxs)("div",{className:"flex flex-col",children:[(0,x.jsx)(D.xv,{textView:D.yS.C4,className:"!text-white/60",children:"Projected Yield:"}),(0,x.jsxs)("div",{className:"flex flex-row flex-wrap gap-2 items-center",children:[(0,x.jsx)(_.X,{isLoaded:!l,className:"rounded-lg dark:bg-background-tableRow",children:(0,x.jsxs)(D.xv,{textView:D.yS.BP1,children:["+ ",(0,Q.T4)(a)]})}),(0,x.jsx)(_.X,{isLoaded:!l,className:"rounded-lg dark:bg-background-tableRow",children:(0,x.jsxs)(D.xv,{textView:D.yS.C2,className:"!text-white/60",children:["≈ $",s]})})]})]}),(0,x.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,x.jsx)(eS,{}),(0,x.jsxs)(D.xv,{textView:D.yS.C4,className:"!text-white/80",children:[(0,Q.T4)(t,2),"% ",eC[e]]})]})]})}),ek=()=>(0,x.jsxs)(e$,{"data-sentry-element":"FundDepositContextProvider","data-sentry-component":"FundDeposit","data-sentry-source-file":"FundDeposit.tsx",children:[(0,x.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,x.jsx)(D.FA,{slots:{header:(0,x.jsx)(ey,{})},classNames:{content:"px-4"},"data-sentry-element":"RoundedCard","data-sentry-source-file":"FundDeposit.tsx",children:(0,x.jsx)(ep,{"data-sentry-element":"FundDepositContent","data-sentry-source-file":"FundDeposit.tsx"})}),(0,x.jsx)(ew,{"data-sentry-element":"FundDepositPeriod","data-sentry-source-file":"FundDeposit.tsx"}),(0,x.jsx)(eN,{"data-sentry-element":"FundDepositProfit","data-sentry-source-file":"FundDeposit.tsx"}),(0,x.jsx)(eh,{"data-sentry-element":"FundDepositButton","data-sentry-source-file":"FundDeposit.tsx"})]}),(0,x.jsx)(eg,{"data-sentry-element":"FundDepositProcessModal","data-sentry-source-file":"FundDeposit.tsx"})]});var e_=a(47131),eP=a(90531),eV=a(42422),eD=a(28679),eO=a(1543),eT=a(11025),eF=a(47846),eE=a(24830),eA=a(60437),eB=a(55081);let eI=e=>{var t,a;if(e.steps.length<1)return"0";let s=null===(t=e.steps.at(-1))||void 0===t?void 0:t.execution;if(!s)return"0";let r=s.toAmount,n=null===(a=s.toToken)||void 0===a?void 0:a.decimals;return void 0===r||void 0===n?"0":el.formatUnits(r,n)},eL=(0,eA.GW)(async e=>eI(await (0,eE.XF)(e,{updateRouteHook(e){}}))),eM=()=>(0,eB.eY)({executeZapIn:eL,isLoading:eL.pending});var eU=a(24250);let eR=(0,eA.MT)(null),eW=(0,eA.GW)(async e=>{let t=await (0,eU.sQ)(e);if(t.routes.length<1)throw Error("No routes found. Reasons for that could be: low liquidity, amount selected is too low, gas costs are too high or there are no routes for the selected combination.");let a=t.routes.filter(e=>!e.steps.some(e=>"symbiosis"===e.tool));return a.length?a[0]:t.routes[0]});(0,eA.UP)({clock:eW.doneData,target:eR});let eZ=(0,eA.yM)();eR.reset([eZ,eW.failData]);let eq=()=>(0,eB.eY)({result:eR,resetCalculate:eZ,fetchCalculate:eW,isLoading:eW.pending}),ez=e=>{var t,a;return(null==e?void 0:null===(a=e.cause)||void 0===a?void 0:null===(t=a.responseBody)||void 0===t?void 0:t.message)||(null==e?void 0:e.message)||"We were unable to complete the current operation. Try again or connect feedback."};(r=u||(u={})).NONE="none",r.PREPARE="prepare",r.APPROVE="approve",r.DEPOSIT="deposit";let eY=p.createContext(null),e$=e=>{let{children:t}=e,{findToken:a}=(0,eT.iJ)(),{address:s,chainId:r}=(0,z.Zc)(),{switchNetwork:n}=(0,eP.g0)(),{vault:i}=$(),[l,o]=p.useState(ei(a(i.tokens[0].address,i.chain_id))),c=p.useMemo(()=>{var e,t;return{isCrypto:!0,address:i.tokens[0].address,chain:{id:i.chain_id,name:i.chain,logoUrl:null!==(e=(0,e_.xz)(i.chain_id).logoURI)&&void 0!==e?e:""},decimals:i.tokens[0].decimals,symbol:i.tokens[0].name,logoUrl:null!==(t=i.tokens[0].icon)&&void 0!==t?t:""}},[i]),m=(0,eT.Ct)(l),h=p.useMemo(()=>i.tokens.map(e=>(0,eT.PO)(e.address,i.chain_id)).includes(m),[m,i.chain_id,i.tokens]),[f,y]=p.useState(""),[w]=(0,eV.nj)(f,700),v=new ex.O(f).dp(6,ex.O.ROUND_DOWN).toNumber(),[b,g]=p.useState(d.Year),j=p.useMemo(()=>{let e={[d.Month]:12,[d.Quarter]:4,[d.Year]:1};return i.apy/e[b]},[i.apy,b]),{fetchBalance:S,balance:C,isLoading:N}=(0,z.G8)(),{fetchPrice:k,price:_,isLoading:P}=(0,z.WO)(),{fetchPrice:V,price:O,isLoading:T}=(0,z.WO)(),{ramp:F}=(0,eF.nW)(),{priceUsd:E,handleCalculate:A,receiveAmount:B}=(0,eF.gj)(),I=e1(c),L="USDB"===c.symbol?"USDB-BLAST":"ETH-BLAST",{fee:M,isLoading:U}=(0,eO.nB)(I&&!l.isCrypto?"".concat(l.symbol,"_").concat(L):""),[R,W]=p.useState(null),Z=l.isCrypto?_:E,{executeZapIn:q,isLoading:Y}=eM(),{fetchCalculate:H,isLoading:K,result:G,resetCalculate:X}=eq(),J=p.useMemo(()=>{if(!l.isCrypto)return null!==B?B:0;if(!G)return 0;let e=el.formatUnits(G.toAmount,G.toToken.decimals);return new ex.O(e).dp(6).toNumber()},[l.isCrypto,B,G,l.decimals]),Q=p.useMemo(()=>j/100*(h?v:J),[j,v,J,h]),ee=p.useMemo(()=>{let e=h?Z:O;return Q?new ex.O(Q).multipliedBy(e).dp(2,ex.O.ROUND_UP).toNumber():0},[Q,Z,O,h]);p.useEffect(()=>{var e,t;h||l.isCrypto||W(null!==(t=null===(e=A({amount:w,fromCurrency:l.symbol,toCurrency:L,fee:M}).error)||void 0===e?void 0:e.message)&&void 0!==t?t:null)},[w,h,l,M]),p.useEffect(()=>{parseFloat(w)&&!h&&s&&l.isCrypto&&et(w,s,l,c)},[w,h,s,l,c]);let et=async(e,t,a,s)=>{try{await H({fromChainId:a.chain.id,toChainId:s.chain.id,fromTokenAddress:a.address?a.address:eD.DR,toTokenAddress:s.address?s.address:eD.DR,fromAmount:el.parseUnits(e,a.decimals).toString(),fromAddress:t,options:{fee:.05,allowSwitchChain:!0}})}catch(t){y("");let e=ez(t);(0,z.RF)({message:"Something went wrong",description:e,type:D.pC.Error})}};p.useEffect(()=>{l.isCrypto&&k({tokenAddress:l.address,chainId:l.chain.id})},[l]),p.useEffect(()=>{V({tokenAddress:c.address,chainId:c.chain.id})},[c]);let ea=p.useCallback(()=>{s&&l.isCrypto&&S(s,l.chain.id,l.address)},[s,l]);p.useEffect(()=>{ea()},[ea]);let{deposit:es,depositState:er,isLoading:en}=eX(),[eo,ed]=p.useState(0),ec=!!G&&!h,eu=null!==B&&!l.isCrypto&&!h,em=async()=>{if(i.chain_id!==r){await n(i.chain_id).catch(()=>{});return}try{ed(0);let e=ec?el.formatUnits(G.toAmount,G.toToken.decimals):f;eu&&(e=(await F({fromCurrency:l.symbol,toCurrency:L,fromAmount:v,toWallet:s})).toAmount),ec&&(e=await q(G),ed(1));let t=c.address;h&&l.isCrypto&&(t=l.address),await es({amount:e,fundType:i.fund_type,chainId:i.chain_id,vaultId:i.id,vaultAddress:i.address,tokenAddress:t,onStartDeposit:()=>ed(ec?2:1)})}catch(e){}finally{ed(0),y(""),ea(),X()}},eh=l.isCrypto&&!N&&new ex.O(f).isGreaterThan(C),ep=v>0&&!eh,ef=!l.isCrypto&&(!!R||U),ey=(en||P||T||N||!ep||K||Y||ef||"pac finance"===i.provider.name.toLowerCase())&&i.chain_id===r,ew=p.useMemo(()=>{if(i.chain_id!==r)return"Switch network";if(R&&!l.isCrypto)return R;if(K)return"Finding best rates...";if(Y)return"Swapping...";switch(er){case u.NONE:if(eh)return"Insufficient Balance";break;case u.DEPOSIT:return"Depositing...";case u.APPROVE:return"Approving..."}return null},[i.chain_id,r,l,R,Y,er,v,C,P,K]),ev=en||K||Y,eb=en||Y;return(0,x.jsx)(eY.Provider,{value:{selectedTokenId:m,defaultToken:c,selectedToken:l,setSelectedToken:o,isSelectedDefaultToken:h,price:Z,priceDefaultToken:O,isLoadingDefaultTokenPrice:T,isLoadingPrice:P,balance:C,isLoadingBalance:N,amount:f,amountNumber:v,setAmount:y,period:b,setPeriod:g,periodApy:j,profit:Q,profitUsd:ee,handleDeposit:em,submitButtonText:ew,isDisabledSubmit:ey,isDisabledInput:ev,isLoadingCalculate:K,receivedAmount:J,isProcessing:eb,step:eo,withZapInDeposit:ec},"data-sentry-element":"unknown","data-sentry-component":"FundDepositContextProvider","data-sentry-source-file":"FundDepositContext.tsx",children:t})};var eH=a(52002);let eK=async e=>{let{vaultContract:t,tokenContract:a,walletAddress:s,amount:r,onStartApprove:n,onStartDeposit:i}=e,l=t.address;if((await a.allowance(s,l)).lt(r)){null==n||n();let e=await a.approve(l,X.Bz);await e.wait()}null==i||i();let o=await t.estimateGas.deposit(r.toString()),d=(0,Q.zb)(o,1.35),c=await t.deposit(r,{gasLimit:d});return await c.wait(),c};var eG=a(99656);let eX=()=>{let{triggerToast:e}=(0,z.pm)(),{walletProvider:t}=(0,eP.B0)(),{address:a}=(0,z.Zc)(),{mutate:s}=(0,L.aN9)(),[r,n]=p.useState(u.NONE);return{deposit:async r=>{let{fundType:i,chainId:l,amount:o,vaultId:d,vaultAddress:c,tokenAddress:m,onStartDeposit:h}=r;try{if(n(u.PREPARE),!a)throw Error("Please connect your wallet");if(!t)throw Error("Wallet provider is not available");let r=new eH.Q(t).getSigner(),x=await r.getChainId();if(l!==x)throw Error("Please switch to the correct network");let p=(0,z.y0)(c,i,r),f=(0,z.s)(m,r),y=await f.decimals(),w=i===L.Oow.dex?ee:i===L.Oow.oneClick?eK:et,v=await w({vaultContract:p,tokenContract:f,amount:el.parseUnits(o.toString(),y),walletAddress:a,onStartApprove:()=>n(u.APPROVE),onStartDeposit:()=>{null==h||h(),n(u.DEPOSIT)}}),b=await f.symbol();s({vaultId:d,data:{tx_hash:v.hash,address:a,action:"deposit"}}),eG.j.event(eG.s.DepositSuccess,{walletAddress:a,amount:o,currency:b,contractAddress:c}),e({message:"".concat((0,Q.T4)(o.toString())," ").concat(b," deposited"),description:"Check your updated Vault Balance or explore the contract."})}catch(t){eG.j.event((0,z.ur)(t)?eG.s.DepositReject:eG.s.DepositError,{walletAddress:a,amount:Number(o),tokenAddress:m,contractAddress:c,message:JSON.stringify(t)}),(0,z.ur)(t)||e({message:"Something went wrong",description:"We were unable to complete the current operation. Try again or connect feedback.",type:D.pC.Error})}finally{n(u.NONE)}},isLoading:r!==u.NONE,depositState:r}},eJ=()=>{let e=p.useContext(eY);if(!e)throw Error("useFundDepositContext must be used within a FundDepositProvider");return e};var eQ=a(37161),e0=a(43915);let e2=[(0,eT.PO)("0x4300000000000000000000000000000000000003",eQ.a.BLS),(0,eT.PO)("",eQ.a.BLS),(0,eT.PO)(e0.d,eQ.a.BLS)],e1=e=>e2.includes((0,eT.Ct)(e)),e4=(0,p.memo)(()=>{let{submitButtonText:e,handleWithdraw:t,isDisabledSubmit:a}=td();return(0,x.jsx)(en,{onClick:t,isDisabled:a,children:null!=e?e:"Withdraw"})}),e5=(0,p.memo)(()=>{let{selectedToken:e,priceSelectedToken:t,amount:a,balance:s,isLoadingBalance:r,isDisabledInput:n,vaultToken:i,setAmount:l,vaultPrice:o,receiveAmount:d,isLoadingPrice:c}=td();return(0,x.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,x.jsx)(D.WA,{onClickPercent:e=>{s&&l(new ex.O(s).multipliedBy(e).dp(1===e?18:6).toFixed())},isDisabledPercent:!s||r,iconProps:{src:i.logoUrl,width:30,height:30,alt:i.symbol,subImage:{src:i.chain.logoUrl,width:13,height:13,alt:i.chain.name}},title:"You withdraw",rightSegment:"≈ ".concat((0,Q.T4)((0,z.$s)(a,o))),inputProps:{placeholder:"0",value:a,onChange:e=>l(e.target.value),readOnly:n}}),(0,x.jsx)("div",{className:"h-px w-full border-b-1 border-dashed border-stroke-tableBorder"}),(0,x.jsx)(D.WA,{isLoading:r||c,iconProps:{src:e.logoUrl,width:30,height:30,alt:e.symbol,subImage:e.isCrypto?{src:e.chain.logoUrl,width:13,height:13,alt:e.chain.name}:void 0},title:"You receive",rightSegment:"≈ ".concat((0,Q.T4)((0,z.$s)(d,t))),inputProps:{placeholder:"0",value:d.toString(),readOnly:!0}})]})}),e3=(0,p.memo)(()=>{let{setSelectedToken:e,selectedToken:t,selectedTokenId:a,isLoadingBalance:s,balance:r,vaultPrice:n,isLoadingVaultPrice:i,setAmount:l,vaultSymbol:o,defaultTokenIds:d}=td(),{openModal:c}=(0,ef.oD)(),{address:u}=(0,z.Zc)();return(0,x.jsxs)("div",{className:"flex flex-col gap-[7px]",children:[(0,x.jsx)(ef._U,{isDisabled:d.length<2,onClick:()=>{c({selectedTokenId:a,onSelectToken:t=>{l(""),e(t)},onlyNativeTokens:!0,nativeTokensId:d,disabledSelectChain:!0})},asset:{icon:t.logoUrl,name:t.symbol},chain:t.isCrypto?{name:t.chain.name,icon:t.chain.logoUrl}:void 0}),u&&(0,x.jsxs)("div",{className:"flex flex-row justify-between px-2.5",children:[(0,x.jsxs)(D.xv,{textView:D.yS.C4,className:"flex flex-row gap-1",children:[(0,x.jsx)("span",{className:"text-white/70",children:"Available"}),(0,x.jsx)(_.X,{isLoaded:!s,className:"rounded-lg dark:bg-background-tableRow",children:" ".concat((0,Q.T4)(r)," ").concat(o)})]}),(0,x.jsx)(_.X,{isLoaded:!i&&!s,className:"rounded-lg dark:bg-background-tableRow",children:(0,x.jsxs)(D.xv,{textView:D.yS.C4,className:"text-white/60",children:["≈ $",(0,Q.T4)((0,z.$s)(r,n),2)]})})]})]})}),e8="WITHDRAW_PROCESS_MODAL_ID",e6=()=>{let{step:e,isLoadingWithdraw:t,selectedToken:a,receiveAmount:s}=td(),r=ev.ZP.useModal(e8);return(p.useEffect(()=>{t?r.show():r.hide()},[t]),t)?(0,x.jsx)(D.Fb,{asset1:(0,x.jsx)(D.uM,{assetName:a.symbol,assetIconUrl:a.logoUrl,amount:s,label:"You receive",chain:a.isCrypto?{chainName:a.chain.name,chainIconUrl:a.chain.logoUrl}:void 0}),step:e,statuses:["Sending transaction on ".concat(a.chain.name,"...")],id:e8,"data-sentry-element":"WaitForCompleteModal","data-sentry-component":"FundWithdrawProcessModal","data-sentry-source-file":"FundWithdrawProcessModal.tsx"}):null};var e9=a(75596),e7=a.n(e9),te=a(94445),tt=a.n(te),ta=a(71318);e7().extend(tt());let ts=(0,p.memo)(()=>{let{vaultPrice:e,isLoadingVaultPrice:t,timer:a}=td();return(0,x.jsx)("div",{className:"p-4 flex flex-col gap-2 bg-background-window rounded-[20px]",children:(0,x.jsxs)("div",{className:"flex flex-row justify-between items-center",children:[(0,x.jsxs)(D.xv,{className:"flex flex-row items-center gap-1",textView:D.yS.C3,children:[(0,x.jsx)("span",{children:(0,x.jsx)(ta.Z,{})}),e7().duration(a,"second").format("mm:ss")]}),(0,x.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,x.jsx)(D.xv,{textView:D.yS.C3,children:"Current Rate:"}),(0,x.jsxs)(D.xv,{className:"flex flex-row items-center gap-1",textView:D.yS.C3,children:[(0,x.jsx)("span",{children:(0,x.jsx)(eS,{})}),(0,x.jsxs)(_.X,{isLoaded:!t,className:"rounded-lg dark:bg-background-tableRow",children:["$",(0,Q.T4)(e)]})]})]})]})})}),tr=()=>(0,x.jsxs)(tl,{"data-sentry-element":"FundWithdrawContextProvider","data-sentry-component":"FundWithdraw","data-sentry-source-file":"FundWithdraw.tsx",children:[(0,x.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,x.jsx)(D.FA,{slots:{header:(0,x.jsx)(e3,{})},classNames:{content:"px-4"},"data-sentry-element":"RoundedCard","data-sentry-source-file":"FundWithdraw.tsx",children:(0,x.jsx)(e5,{"data-sentry-element":"FundWithdrawContent","data-sentry-source-file":"FundWithdraw.tsx"})}),(0,x.jsx)(ts,{"data-sentry-element":"FundWithdrawReceive","data-sentry-source-file":"FundWithdraw.tsx"}),(0,x.jsx)(e4,{"data-sentry-element":"FundWithdrawButton","data-sentry-source-file":"FundWithdraw.tsx"})]}),(0,x.jsx)(e6,{"data-sentry-element":"FundWithdrawProcessModal","data-sentry-source-file":"FundWithdraw.tsx"})]});(n=m||(m={})).NONE="none",n.PREPARE="prepare",n.REDEEM="redeem";let tn=(e,t,a)=>{let s=p.useMemo(()=>{let s=(0,k.JF)(t);return(0,z.y0)(e,a,s)},[e,t,a]),[r,n]=p.useState(""),[i,l]=p.useState(J.O$.from(0)),[o,d]=p.useState("0"),[c,u]=p.useState(!1),[m,h]=p.useState(0),[x,f]=p.useState(!1),y=async()=>await s.symbol(),w=async()=>"sharePrice"in s?await s.sharePrice():J.O$.from(0),v=async e=>{try{u(!0);let t=await s.balanceOf(e),a=await s.decimals();d(el.formatUnits(t,a))}finally{u(!1)}};return p.useEffect(()=>{y().then(n),w().then(l)},[s]),{vaultSymbol:r,balance:o,fetchBalance:v,isLoadingBalance:c,fetchPrice:async()=>{try{f(!0);let e=a===L.Oow.dex?eo:ed;await e(s,t).then(e=>h(new ex.O(e).dp(2,ex.O.ROUND_DOWN).toNumber()))}finally{f(!1)}},price:m,isLoadingPrice:x,sharePrice:i,fetchSharePrice:w}},ti=p.createContext(null),tl=e=>{let{children:t}=e,{findToken:a}=(0,eT.iJ)(),{address:s,chainId:r}=(0,z.Zc)(),{switchNetwork:n}=(0,eP.g0)(),{vault:i}=$(),l=i.tokens.map(e=>(0,eT.PO)(e.address,i.chain_id)),[o,d]=p.useState(ei(a(i.tokens[0].address,i.chain_id))),{vaultSymbol:c,isLoadingBalance:u,balance:h,fetchBalance:f,fetchPrice:y,price:w,isLoadingPrice:v,sharePrice:b}=tn(i.address,i.chain_id,i.fund_type),g=p.useMemo(()=>{var e;return{isCrypto:!0,address:i.address,chain:{id:i.chain_id,name:i.chain,logoUrl:null!==(e=(0,e_.xz)(i.chain_id).logoURI)&&void 0!==e?e:""},decimals:18,symbol:c,logoUrl:""}},[i,c]),j=(0,eT.PO)(o.address,o.chain.id),[S,C]=p.useState(""),N=new ex.O(S).dp(6,ex.O.ROUND_DOWN).toNumber(),{fetchPrice:k,price:_,isLoading:P}=(0,z.WO)();p.useEffect(()=>{o.isCrypto&&k({tokenAddress:o.address,chainId:o.chain.id})},[o]),p.useEffect(()=>{y()},[g]);let V=p.useCallback(()=>{s&&f(s)},[s,o]);p.useEffect(()=>{V()},[V]);let D=p.useMemo(()=>{let e=0;if(!S)return e;if(i.fund_type===L.Oow.dex)e=w/_*Number(S);else{let t=el.parseUnits(S,o.decimals).mul(b).div(BigInt(10**o.decimals));e=el.formatUnits(t,o.decimals)}return new ex.O(e).dp(6,ex.O.ROUND_DOWN).toNumber()},[i.fund_type,w,_,S,o,b]),{withdraw:O,withdrawState:T,isLoading:F}=to(),[E,A]=p.useState(0),B=async()=>{if(o.isCrypto){if(i.chain_id!==r){await n(i.chain_id).catch(()=>{});return}try{A(0),await O({amount:S,fundType:i.fund_type,chainId:i.chain_id,vaultId:i.id,vaultAddress:i.address,tokenAddress:o.address})}finally{A(0),C(""),V()}}},I=!u&&new ex.O(S).isGreaterThan(h),M=N>0&&!I,U=(F||P||v||u||!M)&&i.chain_id===r,R=p.useMemo(()=>{if(i.chain_id!==r)return"Switch Network";switch(T){case m.NONE:if(I)return"Insufficient Balance";break;case m.REDEEM:return"Redeeming..."}return null},[i.chain_id,r,T,I]),[W,{startCountdown:Z,stopCountdown:q,resetCountdown:Y}]=(0,eV.au)({countStart:15,intervalMs:1e3});return p.useEffect(()=>(Z(),()=>{q()}),[]),p.useEffect(()=>{W||(y(),Y(),Z())},[W]),(0,x.jsx)(ti.Provider,{value:{selectedTokenId:j,vaultToken:g,selectedToken:o,setSelectedToken:d,priceSelectedToken:_,isLoadingVaultPrice:v,vaultPrice:w,isLoadingPrice:P,balance:h,isLoadingBalance:u,amount:S,amountNumber:N,setAmount:C,handleWithdraw:B,submitButtonText:R,isDisabledSubmit:U,isDisabledInput:F,defaultTokenIds:l,vaultSymbol:c,receiveAmount:D,timer:W,isLoadingWithdraw:F,step:E},"data-sentry-element":"unknown","data-sentry-component":"FundWithdrawContextProvider","data-sentry-source-file":"FundWithdrawContext.tsx",children:t})},to=()=>{let{triggerToast:e}=(0,z.pm)(),{walletProvider:t}=(0,eP.B0)(),{address:a}=(0,z.Zc)(),{mutate:s}=(0,L.aN9)(),[r,n]=p.useState(m.NONE);return{withdraw:async r=>{let{fundType:i,chainId:l,amount:o,vaultId:d,vaultAddress:c,tokenAddress:u}=r;try{if(n(m.PREPARE),!a)throw Error("Please connect your wallet");if(!t)throw Error("Wallet provider is not available");let r=new eH.Q(t).getSigner(),h=await r.getChainId();if(l!==h)throw Error("Please switch to the correct network");let x=(0,z.y0)(c,i,r),p=await x.decimals(),f=await x.symbol(),y=i===L.Oow.dex?eu:i===L.Oow.oneClick?em:ec;n(m.REDEEM);let w=await y({vaultContract:x,amount:el.parseUnits(o.toString(),p),walletAddress:a,tokenAddress:u});s({vaultId:d,data:{tx_hash:w.hash,address:a,action:"withdraw"}}),eG.j.event(eG.s.WithdrawalSuccess,{walletAddress:a,amount:Number(o),tokenAddress:u,contractAddress:c}),e({message:"".concat((0,Q.T4)(o.toString())," ").concat(f," withdrawn"),description:"Check the balance of the wallet connected to the platform."})}catch(t){eG.j.event((0,z.ur)(t)?eG.s.WithdrawReject:eG.s.WithdrawalError,{walletAddress:a,amount:Number(o),tokenAddress:u,contractAddress:c,message:JSON.stringify(t)}),(0,z.ur)(t)||e({message:"Something went wrong",description:"We were unable to complete the current operation. Try again or connect feedback.",type:D.pC.Error})}finally{n(m.NONE)}},isLoading:r!==m.NONE,withdrawState:r}},td=()=>{let e=p.useContext(ti);if(!e)throw Error("useFundWithdrawContext must be used within a FundWithdrawProvider");return e},tc=[{label:"Deposit",Component:ek},{label:"Withdraw",Component:tr}],tu=e=>{let{children:t,...a}=e;return(0,x.jsx)(G.n,{"aria-label":"fund-calculator-tabs",classNames:{base:"w-full",tabList:"p-1 w-full bg-background-chips h-[61px]",tab:"h-full text-sm font-extrabold uppercase font-unbounded",cursor:"dark:bg-background-window",panel:"p-0"},items:tc,...a,"data-sentry-element":"Tabs","data-sentry-component":"FundCalculatorTabs","data-sentry-source-file":"FundCalculatorTabs.tsx",children:t})},tm=e=>{let{vault:t,className:a}=e,[s,r]=p.useState("Deposit");return(0,x.jsx)(H,{vault:t,"data-sentry-element":"FundCalculatorContextProvider","data-sentry-component":"FundCalculator","data-sentry-source-file":"FundCalculator.tsx",children:(0,x.jsx)("div",{className:(0,P.Z)("sticky top-[100px] p-6 rounded-lg bg-background-chips/50 flex flex-col gap-4 w-[375px] h-fit",a),children:(0,x.jsx)(tu,{selectedKey:s,onSelectionChange:r,"data-sentry-element":"FundCalculatorTabs","data-sentry-source-file":"FundCalculator.tsx",children:e=>(0,x.jsx)(K.r,{title:e.label,children:(0,x.jsx)(e.Component,{})},e.label)})})})},th=ev.ZP.create(e=>{let{vault:t,type:a}=e,s=ev.ZP.useModal();return(0,x.jsx)(H,{vault:t,children:(0,x.jsxs)(D.u_,{onClose:()=>{s.remove()},children:[(0,x.jsx)(D.u_.Header,{children:"deposit"===a?"Deposit":"Withdraw"}),(0,x.jsx)(D.u_.Body,{children:"deposit"===a?(0,x.jsx)(ek,{}):(0,x.jsx)(tr,{})})]})})}),tx=e=>{let{vault:t,className:a}=e,[s,r]=p.useState("Deposit"),n=ev.ZP.useModal(th);return(0,x.jsx)("div",{className:a,"data-sentry-component":"FundCalculatorMobile","data-sentry-source-file":"FundCalculatorMobile.tsx",children:(0,x.jsx)(tu,{onSelectionChange:e=>{t&&(n.show({vault:t,type:e.toString().toLowerCase()}),r(e))},selectedKey:s,"data-sentry-element":"FundCalculatorTabs","data-sentry-source-file":"FundCalculatorMobile.tsx",children:e=>(0,x.jsx)(K.r,{title:e.label},e.label)})})};var tp=a(13380),tf=a.n(tp),ty=a(27671),tw=a(4111),tv=a(29835),tb=a(59288),tg=a(95959),tj=a(65390),tS=a(95618),tC=a(74701),tN=a(86142),tk=a(46034),t_=a(77673);let tP=(e,t)=>(0,t_.useQuery)({enabled:!!e,queryFn:async()=>{try{let a=(0,k.JF)(t);if(!a)throw Error("useOneClickLendingPools() provider not found");let s=(0,z.y0)(e,L.Oow.oneClick,a),r=await s.getPools(),n=[];for(let e of r){let t=(0,z.s)(e,a),r=(await t.name()).replace("OneClick ",""),i=(await s.lendingShares(e)).toNumber()/100;n.push({name:r,value:i})}return n}catch(e){return[]}},queryKey:["OneClickLendingPools",e,t]});(i=h||(h={})).sharePrice="share_price",i.tvl="tvl",i.profit="profit_percent",i.apy="apy",i.distribution="distribution";let tV={[h.tvl]:"TVL",[h.sharePrice]:"Share price",[h.profit]:"Profit",[h.apy]:"APY",[h.distribution]:"Distribution"},tD={[h.tvl]:"$",[h.sharePrice]:"$",[h.profit]:"$",[h.apy]:"%",[h.distribution]:"%"},tO=Object.entries(tV).map(e=>{let[t,a]=e;return{key:t,title:a}}),tT=tO.filter(e=>{let{key:t}=e;return[h.tvl,h.apy,h.distribution].includes(t)}),tF=tO.filter(e=>{let{key:t}=e;return![h.apy,h.distribution].includes(t)}).map(e=>{let{key:t}=e;return t}),tE=(0,p.memo)(e=>{let{onChange:t,value:a,withDistribution:s,...r}=e;return(0,x.jsx)(G.n,{size:"sm",items:s?tT:tT.filter(e=>e.key!==h.distribution),classNames:{tab:"px-2.5",tabList:"rounded-full p-0.5 bg-background-chips gap-0.5",cursor:"rounded-full dark:bg-white bg-white",tabContent:"group-data-[selected=true]:text-black font-poppins"},selectedKey:a,onSelectionChange:e=>t(e),...r,children:e=>{let{key:t,title:a}=e;return(0,x.jsx)(K.r,{title:a,value:t},t)}})}),tA=["Month","Year","All"],tB=(e,t)=>t===h.apy||t===h.distribution?[]:e.sort((e,t)=>e7()(e.day).valueOf()-e7()(t.day).valueOf()).filter(e=>e[t]).map(e=>({name:e7()(e.day).format("MM/DD"),value:(0,ex.O)(e[t]).dp(2).toNumber(),unit:tD[t]})),tI=e=>e.filter(e=>e.apy).map(e=>({name:e.month,value:(0,ex.O)(e.apy).multipliedBy(100).dp(2).toNumber(),unit:tD[h.apy]})),tL=(0,p.memo)(e=>{let{vaultId:t,withDistribution:a,vaultAddress:s,chainId:r}=e,[n,i]=p.useState(h.tvl),[l,o]=p.useState("All"),{data:d,isLoading:c}=(0,L.NNy)(t,{query:{queryKey:["getApy",t]}}),{data:u,isLoading:m}=(0,L.BXx)(t,{timeframe:l},{query:{queryKey:["getFundHistories",l,t]}}),{data:f,isLoading:y}=tP(s,r),w=p.useMemo(()=>{var e,t;return n===h.apy?tI(null!==(e=null==d?void 0:d.data.data)&&void 0!==e?e:[]):tB(null!==(t=null==u?void 0:u.data.data)&&void 0!==t?t:[],n)},[n,d,u]),v=c||m||y,b=!v&&0===w.length&&n!==h.distribution;return(0,x.jsxs)(D.Zb,{children:[(0,x.jsxs)(D.Zb.Header,{className:"flex flex-row flex-wrap gap-2 justify-between !px-3 md:px-6",children:[(0,x.jsx)(tE,{withDistribution:a,isDisabled:v,value:n,onChange:i}),tF.includes(n)&&(0,x.jsx)(D.Ph,{disabled:v,"aria-label":"Timeframe",placeholder:"Timeframe",size:"sm",className:"max-w-[124px]",selectionMode:"single",selectedKeys:[l],onChange:e=>{o(e.target.value)},children:tA.map(e=>(0,x.jsx)(D.Ph.Item,{children:e},e))})]}),(0,x.jsxs)(D.Zb.Content,{id:"chart-wrapper",className:"px-1 md:px-6 !bg-transparent",children:[v&&(0,x.jsx)("div",{className:"flex justify-center",children:(0,x.jsx)(D.aN,{})}),b&&(0,x.jsx)("div",{className:"w-full flex justify-center items-center h-[250px]",children:(0,x.jsx)(D.xv,{className:"!text-white/60",children:"No available data"})}),!v&&n===h.distribution&&(0,x.jsx)(tR,{data:null!=f?f:[]}),!v&&!b&&n!==h.distribution&&(0,x.jsx)(tM,{dataKeyName:tV[n],unit:tD[n],data:w})]})]})}),tM=e=>{let{unit:t,data:a,dataKeyName:s}=e;return(0,x.jsx)(ty.h,{width:"100%",height:250,"data-sentry-element":"ResponsiveContainer","data-sentry-component":"RenderLineChart","data-sentry-source-file":"VaultCharts.tsx",children:(0,x.jsxs)(tw.T,{data:a,margin:{top:5,right:30,left:30,bottom:5},dataKey:s,"data-sentry-element":"AreaChart","data-sentry-source-file":"VaultCharts.tsx",children:[(0,x.jsx)("defs",{"data-sentry-element":"defs","data-sentry-source-file":"VaultCharts.tsx",children:(0,x.jsxs)("linearGradient",{id:"colorUv",x1:"0",y1:"0",x2:"0",y2:"1","data-sentry-element":"linearGradient","data-sentry-source-file":"VaultCharts.tsx",children:[(0,x.jsx)("stop",{offset:"5%",stopColor:"#f9e7272b",stopOpacity:.8,"data-sentry-element":"stop","data-sentry-source-file":"VaultCharts.tsx"}),(0,x.jsx)("stop",{offset:"95%",stopColor:"#f9e7272b",stopOpacity:.1,"data-sentry-element":"stop","data-sentry-source-file":"VaultCharts.tsx"})]})}),(0,x.jsx)(tv.u,{type:"monotone",dataKey:"value",name:s,stroke:"#F9E727",fillOpacity:1,fill:"url(#colorUv)","data-sentry-element":"Area","data-sentry-source-file":"VaultCharts.tsx"}),(0,x.jsx)(tb.q,{stroke:"#ccc",strokeDasharray:"2",opacity:.2,"data-sentry-element":"CartesianGrid","data-sentry-source-file":"VaultCharts.tsx"}),(0,x.jsx)(tg.K,{tick:{fill:"rgba(255,255,255,0.3)"},dataKey:"name",className:"font-poppins text-xs","data-sentry-element":"XAxis","data-sentry-source-file":"VaultCharts.tsx"}),(0,x.jsx)(tj.B,{padding:{bottom:20,top:20},tick:{fill:"rgba(255,255,255,0.3)"},allowDecimals:!0,type:"number",mirror:!0,domain:["dataMin * 0.6","dataMax * 1.4"],className:"font-poppins text-xs",fill:"#fff",tickFormatter:e=>"$"===t?"".concat(t).concat(tf()(e).format("0.00a")):"".concat(e).concat(t),"data-sentry-element":"YAxis","data-sentry-source-file":"VaultCharts.tsx"}),(0,x.jsx)(tS.u,{payload:a,content:(0,x.jsx)(tW,{}),"data-sentry-element":"RechartsTooltip","data-sentry-source-file":"VaultCharts.tsx"})]})})},tU=["#0088FE","#00C49F","#FFBB28","#ff2894"],tR=e=>{let{data:t}=e,a=(0,z.ac)("md");return(0,x.jsx)(ty.h,{width:"100%",height:250,"data-sentry-element":"ResponsiveContainer","data-sentry-component":"RenderPieChart","data-sentry-source-file":"VaultCharts.tsx",children:(0,x.jsx)(tC.u,{className:"max-w-[50%]","data-sentry-element":"PieChart","data-sentry-source-file":"VaultCharts.tsx",children:(0,x.jsx)(tN.b,{dataKey:"value",isAnimationActive:!1,data:t,cx:"50%",cy:"50%",outerRadius:a?50:80,fill:"#8884d8",label:e=>{let{name:t,percent:a}=e;return"".concat(t," (").concat((null!=a?a:0)*100,"%)")},fontSize:a?9:16,className:"outline-0","data-sentry-element":"Pie","data-sentry-source-file":"VaultCharts.tsx",children:t.map((e,t)=>(0,x.jsx)(tk.b,{fill:tU[t%tU.length]},e.name))})})})},tW=e=>(0,x.jsxs)("div",{className:"bg-background-chips rounded-lg p-4 flex flex-col gap-1","data-sentry-component":"CustomTooltip","data-sentry-source-file":"VaultCharts.tsx",children:[(0,x.jsx)(D.xv,{textView:D.yS.C2,"data-sentry-element":"Text","data-sentry-source-file":"VaultCharts.tsx",children:e.label}),e.payload.map(e=>(0,x.jsxs)(D.xv,{textView:D.yS.C4,className:"!text-white/60",children:[e.name,": ","$"===e.payload.unit&&e.payload.unit,tf()(e.payload.value).format("0.00a"),"$"!==e.payload.unit&&e.payload.unit]}))]});var tZ=a(72301),tq=a(88263);let tz=e=>{var t,a;let{address:s}=(0,z.Zc)(),{data:r,isLoading:n}=(0,L.AwN)(e,{query:{queryKey:[tq.S8.VaultFee]}}),i=p.useMemo(()=>{var e,t,a,s,n,i;let l=null==r?void 0:r.data.data;return{deposit:(null!==(s=null==l?void 0:null===(e=l.find(e=>{let{fund_fee_type:t}=e;return"deposit"===t}))||void 0===e?void 0:e.fee_percent)&&void 0!==s?s:0)/100,withdrawal:(null!==(n=null==l?void 0:null===(t=l.find(e=>{let{fund_fee_type:t}=e;return"withdrawal"===t}))||void 0===t?void 0:t.fee_percent)&&void 0!==n?n:0)/100,profit:(null!==(i=null==l?void 0:null===(a=l.find(e=>{let{fund_fee_type:t}=e;return"profit"===t}))||void 0===a?void 0:a.fee_percent)&&void 0!==i?i:0)/100}},[r]),{data:l,isLoading:o,isError:d}=(0,L.__B)(e,{address:s},{query:{queryKey:[tq.S8.Vault,e,s]}}),c=null==l?void 0:null===(t=l.data)||void 0===t?void 0:t.ok,u=null==l?void 0:null===(a=l.data)||void 0===a?void 0:a.data,m=null==u?void 0:u.parameter,h=p.useMemo(()=>u?Array.isArray(u.tokens)?u.tokens:[u.token]:[],[u]),x=tf()(null==u?void 0:u.tvl).format("0.00a"),f=tf()(null==u?void 0:u.overall_investments_usd).format("0.00a"),y=(null==u?void 0:u.fund_type)==="one_click";return p.useEffect(()=>{!1===c&&(0,tZ.notFound)()},[c]),{isLoading:o||n,isError:d,vault:u,tokens:h,fees:i,vaultParams:m,vaultTvl:x,cybroTvl:f,withDistribution:y}},tY=e=>{let{vaultId:t}=e,{vault:a,tokens:s,fees:r,isLoading:n,vaultTvl:i,cybroTvl:l,withDistribution:o}=tz(t),[d,c]=p.useState(new Set([""])),u="all"!==d&&d.has("description");if(n||!a)return(0,x.jsx)(tH,{});let m=a.description.length>256,h=[7,8,9].includes(t);return(0,x.jsxs)("div",{className:"w-full h-full flex flex-col gap-4","data-sentry-component":"VaultPageV2","data-sentry-source-file":"VaultPageV2.tsx",children:[!h&&a.alert_text&&(0,x.jsxs)(y.z,{size:"lg",color:"danger",className:"flex flex-wrap flex-row gap-2 items-center px-4 py-3 mb-2",children:[(0,x.jsx)(q.Z,{className:"size-5 text-white flex-shrink-0"}),(0,x.jsx)(D.xv,{textView:D.yS.P2,className:"whitespace-normal",children:a.alert_text})]}),(0,x.jsxs)("div",{className:"flex flex-row justify-center md:justify-between items-center flex-wrap gap-2",children:[(0,x.jsxs)("div",{className:"flex flex-wrap flex-row items-center gap-1.5 justify-center md:justify-start text-center md:text-left",children:[s.map(e=>{var t;return(0,x.jsx)(D.Y_,{alt:e.name,src:null!==(t=e.icon)&&void 0!==t?t:z.Ok.noImage,height:48,width:48},e.name)}),(0,x.jsx)(D.xv,{textView:D.yS.H3,"data-sentry-element":"Text","data-sentry-source-file":"VaultPageV2.tsx",children:a.name}),a.badges.map(e=>(0,x.jsx)(D.Af,{children:e.name},e.name))]}),(0,x.jsx)(f.A,{title:"View contract vault",isIconOnly:!0,as:"a",target:"_blank",href:"".concat((0,k.kF)(a.chain_id),"/address/").concat(a.address),"data-sentry-element":"Button","data-sentry-source-file":"VaultPageV2.tsx",children:(0,x.jsx)(j.x,{"data-sentry-element":"LinkIcon","data-sentry-source-file":"VaultPageV2.tsx"})})]}),h?(0,x.jsxs)(p.Fragment,{children:[(0,x.jsxs)(y.z,{size:"lg",color:"danger",className:"mx-auto flex flex-wrap w-fit flex-row gap-2 items-center px-4 py-3 mb-2",children:[(0,x.jsx)(q.Z,{className:"size-5 text-white flex-shrink-0"}),(0,x.jsxs)(D.xv,{textView:D.yS.P2,className:"whitespace-normal",children:["This Vault has been deprecated, and all deposits have been"," ",(0,x.jsx)(w.O,{href:"".concat((0,k.kF)(a.chain_id),"/tx/").concat({7:"0x2e7eebe00d762ef29fe599be615691c815874b9de11f4629c532cfec7350b2cb",8:"0x6027fd22ad076fe9f7745c9cea50d49ce7a498f083acdb0ce5dee94ea9e5bfeb",9:"0x556bde072daddf5b06248486f6cabbf1e7a027357f8f8f36a1714320fdf97c0e"}[t.toString()]),target:"_blank",children:"refunded."}),(0,x.jsx)("br",{}),"If you previously had a deposit in this Vault, please check your wallet.",(0,x.jsx)("br",{}),"For any issues or concerns, feel free to contact us at"," ",(0,x.jsx)(w.O,{href:"mailto:support@cybro.io",children:"support@cybro.io"}),(0,x.jsx)("br",{})]})]}),(0,x.jsx)(N.default,{href:"/one-click",children:(0,x.jsx)(D.zx,{className:"w-fit mx-auto",children:"Explore other opportunities"})})]}):(0,x.jsxs)("div",{className:"flex flex-col fund-order:flex-row gap-4 flex-wrap",children:[(0,x.jsxs)("section",{className:"flex flex-col gap-4 flex-1",children:[(0,x.jsx)(D.Zb,{children:(0,x.jsx)(D.Zb.Header,{className:"!p-3 md:p-6",children:(0,x.jsxs)("div",{className:"flex flex-row flex-wrap justify-around gap-y-3",children:[(0,x.jsx)(t$,{title:"APY",value:"".concat(a.apy,"%")}),(0,x.jsx)(t$,{title:"TVL",value:"$".concat(i),tooltipContent:(0,x.jsxs)("div",{className:"flex flex-col gap-2 p-3",children:[(0,x.jsxs)(D.xv,{textView:D.yS.C3,children:["Total TVL: $",i]}),(0,x.jsxs)(D.xv,{textView:D.yS.C3,children:["Cybro TVL: $",l]})]})}),(0,x.jsx)(t$,{title:"Provider",value:a.provider.name})]})})}),(0,x.jsx)(v.d,{className:"bg-background-chips/50 rounded-lg px-6",selectedKeys:m?d:["description"],onSelectionChange:c,children:(0,x.jsx)(b.G,{hideIndicator:!m,"aria-label":"desc",title:(0,x.jsx)(D.xv,{textView:D.yS.H4,className:"mb-2",children:"Vault description"}),subtitle:(0,x.jsx)(D.xv,{textView:D.yS.C4,className:"mb-2",children:u?a.description:C()(a.description,{length:256})})},"description")}),(0,x.jsx)(tL,{withDistribution:o,vaultId:t,vaultAddress:a.address,chainId:a.chain_id}),(0,x.jsx)(R,{vaultId:a.id,trustScore:a.trust_score,auditor:a.auditors[0]}),(0,x.jsx)(D.Zb,{children:(0,x.jsx)(D.Zb.Header,{className:"!p-3 md:p-6",children:(0,x.jsxs)("div",{className:"flex flex-row flex-wrap justify-around gap-y-3",children:[(0,x.jsx)(t$,{title:"Deposit Fee",value:"".concat(r.deposit,"%")}),(0,x.jsx)(t$,{title:"Withdrawal Fee",value:"".concat(r.withdrawal,"%")}),(0,x.jsx)(t$,{title:"Profit Fee",value:"".concat(r.profit,"%")})]})})})]}),(0,x.jsx)(tx,{vault:a,className:"block fund-order:hidden sticky bottom-5 flex-1"}),(0,x.jsx)(tm,{vault:a,className:"hidden fund-order:flex"})]})]})},t$=e=>{let{value:t,title:a,tooltipContent:s}=e,[r,n]=p.useState(!1);return(0,x.jsxs)("div",{className:"flex flex-col gap-1 items-center","data-sentry-component":"VaultInfoField","data-sentry-source-file":"VaultPageV2.tsx",children:[(0,x.jsxs)("div",{className:"flex flex-row gap-1 items-center justify-center",children:[(0,x.jsx)(D.xv,{textView:D.yS.C4,className:"!text-white/60","data-sentry-element":"Text","data-sentry-source-file":"VaultPageV2.tsx",children:a}),s&&(0,x.jsx)(g.e,{classNames:{content:"whitespace-pre-wrap max-w-[500px] p-4"},showArrow:!0,content:s,isOpen:r,onOpenChange:e=>!e&&n(e),children:(0,x.jsx)(f.A,{radius:"full",className:"!size-5 !p-0 !min-w-0",isIconOnly:!0,variant:"shadow",onClick:()=>n(e=>!e),children:(0,x.jsx)(Z,{})})})]}),(0,x.jsx)(D.xv,{textView:D.yS.C2,"data-sentry-element":"Text","data-sentry-source-file":"VaultPageV2.tsx",children:t})]})},tH=()=>(0,x.jsx)("div",{className:"h-[300px] flex justify-center items-center","data-sentry-component":"VaultPageV2Loader","data-sentry-source-file":"VaultPageV2.tsx",children:(0,x.jsx)(D.aN,{"data-sentry-element":"Loader","data-sentry-source-file":"VaultPageV2.tsx"})});var tK=tY},40280:function(e,t,a){"use strict";a.r(t)},7780:function(e){e.exports={dropdownButton:"SafetyScoreDetailsV2_dropdownButton__YPj3J",opened:"SafetyScoreDetailsV2_opened__lpy81",trustScoreBreakdown:"SafetyScoreDetailsV2_trustScoreBreakdown__JuW27",heading:"SafetyScoreDetailsV2_heading__1LCY_",container:"SafetyScoreDetailsV2_container__pXXv6",trustScoreBanner:"SafetyScoreDetailsV2_trustScoreBanner__80kvr",trustScoreLeft:"SafetyScoreDetailsV2_trustScoreLeft__9eapR",vaultDescription:"SafetyScoreDetailsV2_vaultDescription__piHvE",tooltip:"SafetyScoreDetailsV2_tooltip__bBiXZ",tooltipDesktop:"SafetyScoreDetailsV2_tooltipDesktop__44HzP",breakdownSectionTitle:"SafetyScoreDetailsV2_breakdownSectionTitle__Z64HO",line:"SafetyScoreDetailsV2_line__ZBsTU",breakdownSection:"SafetyScoreDetailsV2_breakdownSection__RPs54",trustScoreContainer:"SafetyScoreDetailsV2_trustScoreContainer__YrvSM",tooltipMobile:"SafetyScoreDetailsV2_tooltipMobile__jMN1r",trustDescription:"SafetyScoreDetailsV2_trustDescription__hpG4I"}},7504:function(e){e.exports={trustScoreLeft:"TrustScoreBannerV2_trustScoreLeft___5QiF",tooltip:"TrustScoreBannerV2_tooltip__9Lc5e",inspectedContainer:"TrustScoreBannerV2_inspectedContainer__i2iZk",auditedBy:"TrustScoreBannerV2_auditedBy__h6qKn",auditor:"TrustScoreBannerV2_auditor__G8FQP",vaultDescription:"TrustScoreBannerV2_vaultDescription__KJe2a",trustScoreDesktop:"TrustScoreBannerV2_trustScoreDesktop__2UltP",root:"TrustScoreBannerV2_root__VWUkc",trustScoreMobile:"TrustScoreBannerV2_trustScoreMobile__EuuYr",trustScoreRight:"TrustScoreBannerV2_trustScoreRight__PscWn",trustScore:"TrustScoreBannerV2_trustScore__BYRwa"}}},function(e){e.O(0,[9905,3596,4483,452,6302,6918,1866,6384,1601,8218,739,9365,6764,4762,3111,2035,7476,8338,5006,2026,5742,7837,3385,45,991,2971,2985,1744],function(){return e(e.s=8577)}),_N_E=e.O()}]);